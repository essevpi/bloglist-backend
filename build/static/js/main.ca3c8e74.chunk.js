(this.webpackJsonpbloglist=this.webpackJsonpbloglist||[]).push([[0],{54:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),s=n.n(c),o=n(2),l=n.n(o),u=n(6),i=n(5),b=n(1),j=function(e){var t=e.username,n=e.password,r=e.setUsername,a=e.setPassword,c=e.handleLogin;return Object(b.jsxs)("form",{onSubmit:c,className:"LoginForm",children:[Object(b.jsxs)("div",{className:"LoginField",children:[Object(b.jsx)("label",{children:"Username"}),Object(b.jsx)("input",{type:"text",value:t,onChange:function(e){var t=e.target;return r(t.value)}})]}),Object(b.jsxs)("div",{className:"LoginField",children:[Object(b.jsx)("label",{children:"Password"}),Object(b.jsx)("input",{type:"password",value:n,onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(b.jsx)("button",{type:"submit",children:"Log In"})]})},d=n(7),p=n.n(d),g={logIn:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O="/api/blogs",v=null,h=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,p.a.post(O,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f={getAllBlogs:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(O);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){v="bearer ".concat(e)},create:h},x=function(e){var t=e.blog;return Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:[Object(b.jsx)("em",{children:t.title}),", ",t.author,", ",t.likes," likes."]})})},m=function(e){var t=e.blogs;return Object(b.jsx)("div",{children:t.map((function(e){return Object(b.jsx)(x,{blog:e},e.id)}))})},w=function(e){var t=e.blogTitle,n=e.blogAuthor,r=e.blogUrl,a=e.setBlogTitle,c=e.setBlogAuthor,s=e.setBlogUrl,o=e.handleCreateBlog;return Object(b.jsxs)("form",{onSubmit:o,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{children:"Title: "}),Object(b.jsx)("input",{type:"text",value:t,onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{children:"Author: "}),Object(b.jsx)("input",{type:"text",value:n,onChange:function(e){var t=e.target;return c(t.value)}})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{children:"URL: "}),Object(b.jsx)("input",{type:"text",value:r,onChange:function(e){var t=e.target;return s(t.value)}})]}),Object(b.jsx)("button",{type:"submit",children:"Create Blog"})]})},S=function(e){var t=e.type,n=e.message,r={color:"Success"===t?"#00dd00":"#dd0000",backgroundColor:"Success"===t?"#e8ffe8":"#ffe8e8",border:"1px solid ".concat("Success"===t?"#00dd00":"#dd0000"),borderRadius:"16px",padding:"8px",width:"50%",textAlign:"center",margin:"0 auto"};return null===n?null:Object(b.jsx)("div",{style:r,children:n})},k=n(19),y=n.n(k),N=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(i.a)(c,2),o=s[0],d=s[1],p=Object(r.useState)(""),O=Object(i.a)(p,2),v=O[0],h=O[1],x=Object(r.useState)(null),k=Object(i.a)(x,2),N=k[0],C=k[1],B=Object(r.useState)(""),L=Object(i.a)(B,2),U=L[0],A=L[1],T=Object(r.useState)(""),I=Object(i.a)(T,2),E=I[0],R=I[1],J=Object(r.useState)(""),F=Object(i.a)(J,2),P=F[0],D=F[1],H=Object(r.useState)(""),M=Object(i.a)(H,2),z=M[0],q=M[1],G=Object(r.useState)(null),K=Object(i.a)(G,2),Q=K[0],V=K[1];Object(r.useEffect)((function(){N&&function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.getAllBlogs();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[N]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("bloglistLoggedUser");if(e){var t=JSON.parse(e);C(t),f.setToken(t.token)}}),[]);var W=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g.logIn({username:o,password:v});case 4:n=e.sent,window.localStorage.setItem("bloglistLoggedUser",JSON.stringify(n)),f.setToken(n.token),C(n),d(""),h(""),V("".concat(n.username," sucessfully logged in")),q("Success"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),V("Could not log in"),q("Error");case 18:setTimeout((function(){V(null)}),5e3);case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(l.a.mark((function e(t){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r={title:U,author:E,url:P},e.next=5,f.create(r);case 5:c=e.sent,a(n.concat(c)),A(""),R(""),D(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ERROR:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("div",{className:"NavContainer",children:Object(b.jsxs)("div",{className:"NavHeader",children:[Object(b.jsx)(y.a,{className:"NavLogo"}),Object(b.jsx)("p",{className:"NavTitle",children:"Bloglist"})]})}),Object(b.jsxs)("div",{className:"MainContent",children:[Object(b.jsx)(S,{type:z,message:Q}),null===N?Object(b.jsx)(j,{username:o,password:v,setUsername:d,setPassword:h,handleLogin:W}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Hello ",N.name,"!",Object(b.jsx)("button",{onClick:function(){window.localStorage.removeItem("bloglistLoggedUser"),C(null)},children:"Log Out"})]}),Object(b.jsx)(m,{blogs:n}),Object(b.jsx)("p",{children:"Create new blog:"}),Object(b.jsx)(w,{blogTitle:U,blogAuthor:E,blogUrl:P,setBlogAuthor:R,setBlogTitle:A,setBlogUrl:D,handleCreateBlog:X})]})]})]})};n(54);s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.ca3c8e74.chunk.js.map