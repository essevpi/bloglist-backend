(this.webpackJsonpbloglist=this.webpackJsonpbloglist||[]).push([[0],{56:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(9),s=n.n(a),o=n(2),i=n.n(o),l=n(5),u=n(3),d=n(0),j=function(e){var t=e.handleLogin,n=Object(r.useState)(""),c=Object(u.a)(n,2),a=c[0],s=c[1],o=Object(r.useState)(""),i=Object(u.a)(o,2),l=i[0],j=i[1];return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(a,l),s(""),j("")},className:"LoginForm",children:[Object(d.jsxs)("div",{className:"LoginField",children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{type:"text",value:a,onChange:function(e){s(e.target.value)}})]}),Object(d.jsxs)("div",{className:"LoginField",children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",value:l,onChange:function(e){j(e.target.value)}})]}),Object(d.jsx)("button",{type:"submit",children:"Log In"})]})},b=n(7),v=n.n(b),p={logIn:function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O="/api/blogs",f=null,h=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,v.a.post(O,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={getAllBlogs:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(O);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){f="bearer ".concat(e)},create:h,update:function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat(O,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,v.a.delete("".concat(O,"/").concat(t.id),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=n(11),m=n(23),k=n.n(m),y=function(e){var t=e.blog,n=e.user,c=e.addLike,a=e.removeBlog,s=Object(r.useState)(!1),o=Object(u.a)(s,2),i=o[0],l=o[1],j={display:i?"":"none"};return Object(d.jsxs)("div",{className:"Blog",children:[Object(d.jsxs)("div",{className:"BlogHeading",children:[Object(d.jsx)("div",{className:"BlogTitle",children:Object(d.jsx)("em",{children:t.title})}),Object(d.jsx)("div",{className:"BlogAuthor",children:t.author}),Object(d.jsx)("button",{className:"BlogViewBtn",onClick:function(){l(!i)},children:i?"Hide":"View"})]}),Object(d.jsxs)("div",{className:"BlogDesc",style:j,children:[Object(d.jsx)("div",{className:"BlogLink",children:Object(d.jsx)("a",{href:"#",children:t.url})}),Object(d.jsxs)("div",{children:["Posted By  ",t.user.name]}),Object(d.jsx)("div",{className:"RemoveBlogBtn",children:null!==n&&n.username===t.user.username&&Object(d.jsx)("button",{onClick:function(){return a(t)},children:"Remove"})}),Object(d.jsxs)("div",{className:"BlogLikes",children:[t.likes," likes",Object(d.jsx)("button",{className:"BlogLikeBtn",onClick:function(){var e=Object(x.a)(Object(x.a)({},t),{},{likes:t.likes+1});c(e)},children:Object(d.jsx)(k.a,{style:{fontSize:"1rem"}})})]})]})]})},w=function(e){var t=e.blogs,n=e.user,r=e.addLike,c=e.removeBlog;return Object(d.jsx)("div",{className:"BlogList",children:t.sort((function(e,t){return t.likes-e.likes})).map((function(e){return Object(d.jsx)(y,{blog:e,user:n,addLike:r,removeBlog:c},e.id)}))})},N=function(e){var t=e.createBlog,n=Object(r.useState)(""),c=Object(u.a)(n,2),a=c[0],s=c[1],o=Object(r.useState)(""),i=Object(u.a)(o,2),l=i[0],j=i[1],b=Object(r.useState)(""),v=Object(u.a)(b,2),p=v[0],O=v[1];return Object(d.jsxs)("form",{className:"BlogForm",onSubmit:function(e){e.preventDefault(),t({title:a,author:l,url:p}),s(""),j(""),O("")},children:[Object(d.jsxs)("div",{className:"BlogField",children:[Object(d.jsx)("label",{children:"Title: "}),Object(d.jsx)("input",{type:"text",value:a,onChange:function(e){s(e.target.value)}})]}),Object(d.jsxs)("div",{className:"BlogField",children:[Object(d.jsx)("label",{children:"Author: "}),Object(d.jsx)("input",{type:"text",value:l,onChange:function(e){j(e.target.value)}})]}),Object(d.jsxs)("div",{className:"BlogField",children:[Object(d.jsx)("label",{children:"URL: "}),Object(d.jsx)("input",{type:"text",value:p,onChange:function(e){O(e.target.value)}})]}),Object(d.jsx)("button",{type:"submit",children:"Create Blog"})]})},B=function(e){var t=e.type,n=e.message,r={color:"Success"===t?"var(--theme-primary)":"#dd0000",backgroundColor:"#2b2b2b",border:"1px solid ".concat("Success"===t?"var(--theme-primary)":"#dd0000"),borderRadius:"0.45rem",padding:"1rem",width:"50%",textAlign:"center",margin:"1rem auto"};return null===n?null:Object(d.jsx)("div",{style:r,children:n})},L=n(25),S=n.n(L),C=function(e){var t=e.user,n=e.handleLogout;return Object(d.jsxs)("div",{className:"NavContainer",children:[Object(d.jsx)("div",{className:"NavLeftHalf",children:Object(d.jsxs)("div",{className:"NavHeader",children:[Object(d.jsx)(S.a,{className:"NavLogo"}),Object(d.jsx)("p",{className:"NavTitle",children:"Bloglist"})]})}),Object(d.jsx)("div",{className:"NavRightHalf",children:null===t?null:Object(d.jsxs)("div",{className:"NavUser",children:[Object(d.jsx)("p",{children:t.name}),Object(d.jsx)("button",{onClick:n,children:"Log Out"})]})})]})},T=c.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),c=Object(u.a)(n,2),a=c[0],s=c[1],o={display:a?"":"none"},i={display:a?"none":""},l=function(){s(!a)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:l}})),Object(d.jsxs)("div",{style:{width:"100%"},children:[Object(d.jsx)("div",{style:i,children:Object(d.jsx)("button",{onClick:l,children:e.buttonLabel})}),Object(d.jsxs)("div",{style:o,children:[Object(d.jsxs)("div",{className:"TogglableModal",children:[e.buttonLabel,Object(d.jsx)("button",{onClick:l,className:"CancelBtn",children:"Cancel"})]}),e.children]})]})}));T.displayName="Togglable";var A=T,I=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),s=Object(u.a)(a,2),o=s[0],b=s[1],v=Object(r.useState)(""),O=Object(u.a)(v,2),f=O[0],h=O[1],x=Object(r.useState)(null),m=Object(u.a)(x,2),k=m[0],y=m[1],L=Object(r.useRef)();Object(r.useEffect)((function(){o&&function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.getAllBlogs();case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[o]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("bloglistLoggedUser");if(e){var t=JSON.parse(e);b(t),g.setToken(t.token)}}),[]);var S=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.logIn({username:t,password:n});case 3:r=e.sent,window.localStorage.setItem("bloglistLoggedUser",JSON.stringify(r)),g.setToken(r.token),b(r),y("".concat(r.username," sucessfully logged in")),h("Success"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),y("Could not log in: ".concat(e.t0.response.data.error)),h("Error");case 15:setTimeout((function(){y(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.create(t);case 3:r=e.sent,L.current.toggleVisibility(),c(n.concat(r)),y("'".concat(r.title,"' sucessfully added to blogs")),h("Success"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),y("Cannot add this blog: ".concat(e.t0.response.data.error)),h("Error");case 14:setTimeout((function(){y(null)}),5e3);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to remove '".concat(t.title,"'?"))){e.next=14;break}return e.prev=1,e.next=4,g.remove(t);case 4:c(n.filter((function(e){return e.id!==t.id}))),y("'".concat(t.title,"' sucessfully removed from blogs")),h("Success"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),y("Cannot remove this blog: ".concat(e.t0.response.data.error)),h("Error");case 13:setTimeout((function(){y(null)}),5e3);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.update(t);case 3:r=e.sent,c(n.map((function(e){return e.id!==t.id?e:r}))),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(C,{user:o,handleLogout:function(){window.localStorage.removeItem("bloglistLoggedUser"),b(null)}}),Object(d.jsx)("div",{className:"MainContent",children:null===o?Object(d.jsxs)("div",{children:[Object(d.jsx)(B,{type:f,message:k}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Welcome to Bloglist!"}),Object(d.jsx)("p",{children:"Login to start browsing blogs"})]}),Object(d.jsx)(A,{buttonLabel:"Login",children:Object(d.jsx)(j,{handleLogin:S})})]}):Object(d.jsxs)("div",{className:"BlogsContent",children:[Object(d.jsx)(w,{blogs:n,user:o,addLike:F,removeBlog:I}),Object(d.jsx)(B,{type:f,message:k}),Object(d.jsx)(A,{buttonLabel:"Create blog",ref:L,children:Object(d.jsx)(N,{createBlog:T})})]})})]})};n(56);s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(I,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.0caddd22.chunk.js.map